<!doctype html><html lang=en><head><title>What’s New in F# 9 for Quant Developers</title>
<meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><link rel=stylesheet href=/application.ffc4c7b40a84a6cc07476bf220dd79432177a593771276da69cb703d50fcac34.css integrity="sha256-/8THtAqEpswHR2vyIN15QyF3pZN3EnbaactwPVD8rDQ="><link rel=icon type=image/png href=/images/site/favicon_hu14458373468778497799.png><meta property="og:url" content="https://carlvinjerry.github.io/posts/programming/languages/fsharp/fsharp-9-review/"><meta property="og:site_name" content="RΞCURSION"><meta property="og:title" content="What’s New in F# 9 for Quant Developers"><meta property="og:description" content="F# 9 introduces powerful language features—such as improved type inference, enhanced pattern matching, anonymous record updates, and custom equality for structs—that streamline quantitative workflows and reduce code complexity in financial modeling and data processing."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-04-23T19:51:10+03:00"><meta property="article:modified_time" content="2025-08-18T17:45:06+03:00"><meta property="article:tag" content="Functional Programming"><meta property="article:tag" content="F#"><meta property="article:tag" content="Language Features"><meta name=twitter:card content="summary"><meta name=twitter:title content="What’s New in F# 9 for Quant Developers"><meta name=twitter:description content="F# 9 introduces powerful language features—such as improved type inference, enhanced pattern matching, anonymous record updates, and custom equality for structs—that streamline quantitative workflows and reduce code complexity in financial modeling and data processing."><meta name=description content="F# 9 introduces powerful language features—such as improved type inference, enhanced pattern matching, anonymous record updates, and custom equality for structs—that streamline quantitative workflows and reduce code complexity in financial modeling and data processing."><script async src="https://www.googletagmanager.com/gtag/js?id=462784605"></script><script>var dnt,doNotTrack=!1;if(null&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","462784605")}</script><script src=https://cdn.counter.dev/script.js data-id=CarlvinJerry data-utcoffset=1></script><script data-goatcounter=https://carlvinjerry.goatcounter.com/count async src=//gc.zgo.at/count.js></script><script integrity="sha256-DO4ugzEwhTW1Id1UIWn0gUJWaebCYOypeTit6LW4QB4=">let theme=localStorage.getItem("theme-scheme")||localStorage.getItem("darkmode:color-scheme")||"light";theme==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?theme="dark":theme="light"),document.documentElement.setAttribute("data-theme",theme)</script></head><body class="type-posts kind-page" data-bs-spy=scroll data-bs-target=#TableOfContents data-bs-offset=80><div class="container-fluid bg-secondary wrapper"><nav class="navbar navbar-expand-xl top-navbar shadow" id=top-navbar><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button>
<i data-feather=sidebar></i>
</button>
<a class=navbar-brand href=/><img src=/images/site/main-logo_hu1754343916303502928.png id=logo alt=Logo>
RΞCURSION</a>
<button class="navbar-toggler navbar-light" id=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#top-nav-items aria-label=menu>
<i data-feather=menu></i></button><div class="collapse navbar-collapse dynamic-navbar" id=top-nav-items><ul class="nav navbar-nav ms-auto"><li class=nav-item><a class=nav-link href=/#home>Home</a></li><li class=nav-item><a class=nav-link href=/#about>About</a></li><li class=nav-item><a class=nav-link href=/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=nav-link href=/#projects>Projects</a></li><div id=top-navbar-divider></div><li class=nav-item><a class=nav-link id=blog-link href=/posts>Posts</a></li><li class=nav-item><a class=nav-link id=note-link href=/notes>Notes</a></li><li class=nav-item><a class=nav-link href=https://toha-guides.netlify.app/posts/>Docs</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=themeSelector role=button data-bs-toggle=dropdown aria-haspopup=true aria-expanded=false><img id=navbar-theme-icon-svg class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme"></a><div id=themeMenu class="dropdown-menu dropdown-menu-icons-only" aria-labelledby=themeSelector><a class="dropdown-item nav-link" href=# data-scheme=light><img class=theme-icon src=/icons/sun-svgrepo-com.svg width=20 alt="Light Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=dark><img class=theme-icon src=/icons/moon-svgrepo-com.svg width=20 alt="Dark Theme">
</a><a class="dropdown-item nav-link" href=# data-scheme=system><img class=theme-icon src=/icons/computer-svgrepo-com.svg width=20 alt="System Theme"></a></div></li></ul></div></div><img src=/images/site/main-logo_hu1754343916303502928.png class=d-none id=main-logo alt=Logo>
<img src=/images/site/inverted-logo_hu14458373468778497799.png class=d-none id=inverted-logo alt="Inverted Logo"></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts/ data-filter=all>Posts</a></li><div class=subtree><li><a class=list-link href=/posts/introduction/ title=Introduction>Introduction</a></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/programming/> Programming</a><ul class=active><li><i data-feather=plus-circle></i><a class=list-link href=/posts/programming/code-sustainability/> Code Sustainability</a><ul><li><i data-feather=plus-circle></i><a class=list-link href=/posts/programming/code-sustainability/error-handling/> Error Handling</a><ul><li><a class=list-link href=/posts/programming/code-sustainability/error-handling/python-exceptions/ title="Exception Handling in Python">Exception Handling in Python</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/> Succint FSharp</a><ul><li><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/currying/ title="Currying and Partial Application">Currying and Partial Application</a></li><li><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/working-with-paket/ title="A Better Way to Manage Dependencies in F#">A Better Way to Manage Dependencies in F#</a></li><li><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/memoization/ title="Memoization in F#">Memoization in F#</a></li><li><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/pattern-matching/ title="Pattern Matching in F#">Pattern Matching in F#</a></li><li><a class=list-link href=/posts/programming/code-sustainability/succint-fsharp/fs-option-type/ title="Understanding the F# Option Type">Understanding the F# Option Type</a></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/programming/functional-programming/> Functional Programming</a><ul><li><a class=list-link href=/posts/programming/functional-programming/discriminated-unions/ title="Discriminated Unions in F#">Discriminated Unions in F#</a></li><li><a class=list-link href=/posts/programming/functional-programming/functional-programming/ title="Functional Programming Nuances">Functional Programming Nuances</a></li><li><a class=list-link href=/posts/programming/functional-programming/monads/ title="Functors and Monads in F#">Functors and Monads in F#</a></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/programming/interoperability/> Interoperability</a><ul><li><a class=list-link href=/posts/programming/interoperability/rdotnet-interop/ title="R.NET Integration in .NET">R.NET Integration in .NET</a></li></ul></li><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/programming/languages/> Languages</a><ul class=active><li><i data-feather=minus-circle></i><a class="active list-link" href=/posts/programming/languages/fsharp/> fsharp</a><ul class=active><li><a class="active list-link" href=/posts/programming/languages/fsharp/fsharp-9-review/ title=fsharp-9-review>fsharp-9-review</a></li></ul></li></ul></li></ul></li><li><i data-feather=plus-circle></i><a class=list-link href=/posts/quantitative-finance/> Quantitative-Finance</a><ul><li><a class=list-link href=/posts/quantitative-finance/intro-to-sdes/ title="Introduction to SDEs">Introduction to SDEs</a></li><li><a class=list-link href=/posts/quantitative-finance/portfolio-risk-attribution/ title="Portfolio Risk Attribution">Portfolio Risk Attribution</a></li><li><a class=list-link href=/posts/quantitative-finance/moving-averages/ title="Simple Moving Average">Simple Moving Average</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(/posts/programming/languages/fsharp/fsharp-9-review/fsharp.png)></div><div class=page-content><div class="author-profile ms-auto align-self-lg-center"><img class=rounded-circle src=/images/author/j5_hu8605642293593435631.jpg alt="Author Image"><h5 class=author-name>Carlvin Jerry Mwange</h5><p class=text-muted>Wednesday, April 23, 2025 | 8 minutes</p></div><div class=title><h1>What’s New in F# 9 for Quant Developers</h1></div><div class=tags><ul style=padding-left:0><li class=rounded><a href=/tags/functional-programming/ class="btn btn-sm btn-info">functional programming</a></li><li class=rounded><a href=/tags/f#/ class="btn btn-sm btn-info">F#</a></li><li class=rounded><a href=/tags/language-features/ class="btn btn-sm btn-info">language features</a></li></ul></div><div class=post-content id=post-content><p>Unlike general-purpose updates, many of F# 9&rsquo;s features are particularly well-aligned with the needs of quantitative professionals—those who balance mathematical modeling, financial computation, and high-integrity codebases. These improvements refine the language’s functional core while addressing practical challenges faced in real-world applications, such as code readability, workflow modularity, and precision in data modeling.</p><p>In this post, I’ll walk through some of the key updates in F# 9 and explore how they can improve the way we write and structure quantitative code. Each feature will be paired with a real-world use case, drawn from scenarios that are familiar to quantitative researchers, analysts, and developers working across trading systems, risk engines, and research pipelines.</p><hr><h2 id=1-record-struct-enhancements-with-custom-equality>1. Record Struct Enhancements with Custom Equality</h2><h3 id=whats-new>What’s New</h3><p>F# 9 introduces enhancements to record structs, allowing developers to define custom equality and comparison behavior with fine-grained control. We can apply the <code>[&lt;StructuralEquality>]</code> and <code>[&lt;StructuralComparison>]</code> attributes to a struct record and F# generates the necessary methods for <strong>value-based</strong> comparison. This is a powerful tool in performance-critical domains where immutable value types are commonly used and semantic equality matters.</p><p>In traditional object-oriented models, equality often defaults to reference equality-two objects are only equal if they reference the same memory location. But in quantitative development, we frequently work with value objects: entities such as <strong>bonds, trades, or market data snapshots</strong> that should be considered equal based on their contents, not their identity. Ensuring these objects compare by value-especially when represented as lightweight structs-helps maintain both correctness and efficiency.</p><p>This approach not only reduces boilerplate associated with manual equality implementations but also ensures that collections like Set or Map behave correctly and efficiently.</p><p>By declaring a record struct with <code>[&lt;Struct; StructuralEquality; StructuralComparison>]</code>, we get value-based comparison out of the box.</p><h3 id=practical-use-case-deduplicating-bond-instruments>Practical Use Case: Deduplicating Bond Instruments</h3><p>Consider a scenario where you&rsquo;re ingesting bond data from multiple sources. The bonds may be reported in different orders or formats, but semantically they represent the same instrument. Value-based comparison allows you to identify and eliminate duplicates cleanly.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#f92672>[&lt;</span>Struct<span style=color:#f92672>;</span> StructuralEquality<span style=color:#f92672>;</span> StructuralComparison<span style=color:#f92672>&gt;]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Bond</span> <span style=color:#f92672>=</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    Issuer<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    Maturity<span style=color:#f92672>:</span> int <span style=color:#75715e>// in years
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    Coupon<span style=color:#f92672>:</span> <span style=color:#66d9ef>float</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> bonds <span style=color:#f92672>=</span> <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span> Issuer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ABC Corp&#34;</span><span style=color:#f92672>;</span> Maturity <span style=color:#f92672>=</span> 5<span style=color:#f92672>;</span> Coupon <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>05 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span> Issuer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;XYZ Ltd&#34;</span><span style=color:#f92672>;</span> Maturity <span style=color:#f92672>=</span> 5<span style=color:#f92672>;</span> Coupon <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>05 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span> Issuer <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;ABC Corp&#34;</span><span style=color:#f92672>;</span> Maturity <span style=color:#f92672>=</span> 5<span style=color:#f92672>;</span> Coupon <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>05 <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> uniqueBonds <span style=color:#f92672>=</span> bonds <span style=color:#f92672>|&gt;</span> Set.ofList
</span></span><span style=display:flex><span>printfn <span style=color:#e6db74>&#34;Unique bonds count: %d&#34;</span> <span style=color:#f92672>(</span>Set.count uniqueBonds<span style=color:#f92672>)</span>
</span></span></code></pre></div><br><p><strong>Why It Matters</strong></p><p>The resulting set will contain only two unique bonds, as the first and third entries are structurally equal. This feature is especially beneficial in:</p><ul><li>Data ingestion pipelines, where redundancy is common</li><li>Caching strategies, where identifying equivalent inputs is crucial</li><li>Simulation frameworks, where deterministic comparison affects state tracking</li></ul><p>F# 9 bridges a crucial gap between semantic accuracy and runtime efficiency by allowing struct-based records to participate in equality and comparison operations without losing their value-type performance characteristics.</p><hr><h2 id=2-improved-type-inference-for-lambdas-and-partial-application>2. Improved Type Inference for Lambdas and Partial Application</h2><p>F# 9 brings significant improvements to type inference, particularly in cases involving nested lambdas, higher-order functions, and <strong>partial application</strong>. These enhancements enable the compiler to infer types more accurately and with less developer intervention, even in deeply functional constructs or when types are only partially specified.</p><p>This is especially valuable in quantitative domains, where functions often represent transformations over time series, pricing flows, or recursive structures. Instead of cluttering code with explicit type annotations, developers can now write code that remains both **mathematically expressive and semantically precise-**closely resembling the original analytical formulas.</p><p>These refinements also improve the developer experience when composing pipelines or working with APIs like <code>List.map</code>, <code>Array.fold</code>, or <strong>custom monadic workflows</strong>. Fewer type annotations mean less friction during refactoring, and better inference means fewer surprises when types change upstream.</p><h3 id=practical-use-case-npv-calculation>Practical Use Case: NPV Calculation</h3><p>In financial modeling, <strong>net present value (NPV)</strong> is a common calculation where cash flows are discounted to their present value using a given discount rate. With F# 9, we can define such a function succinctly and safely, trusting the compiler to infer the types.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#66d9ef>let</span> calculateNPV discountRate <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    List.sumBy <span style=color:#f92672>(</span><span style=color:#66d9ef>fun</span> <span style=color:#f92672>(</span>year<span style=color:#f92672>,</span> cf<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> cf <span style=color:#f92672>/</span> <span style=color:#f92672>((</span>1<span style=color:#f92672>.</span>0 <span style=color:#f92672>+</span> discountRate<span style=color:#f92672>)</span> <span style=color:#f92672>**</span> <span style=color:#66d9ef>float</span> year<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> cashflows <span style=color:#f92672>=</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 100<span style=color:#f92672>.</span>0<span style=color:#f92672>);</span> <span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 105<span style=color:#f92672>.</span>0<span style=color:#f92672>);</span> <span style=color:#f92672>(</span>3<span style=color:#f92672>,</span> 110<span style=color:#f92672>.</span>0<span style=color:#f92672>)</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> npv <span style=color:#f92672>=</span> calculateNPV 0<span style=color:#f92672>.</span>05 cashflows
</span></span><span style=display:flex><span>printfn <span style=color:#e6db74>&#34;NPV: %.2f&#34;</span> npv
</span></span></code></pre></div><p>F# 9 infers the types involved in the lambda correctly, so we can write clear and functional code that resembles the mathematics behind it.</p><br><p><strong>Why It Matters</strong></p><ul><li><p>The lambda inside <code>List.sumBy</code> operates on a tuple of <code>(int * float)</code> - a common structure for time-indexed financial data.</p></li><li><p>The compiler automatically infers the function signature as <code>float -> (int * float) list -> float</code>, reflecting a partially applied function returning a curried form.</p></li><li><p>There’s no need to annotate the types of <code>year</code> or <code>cf</code>; F# deduces their roles based on the mathematical operations applied.</p></li></ul><p><strong>Broader Impact</strong><br>In large-scale quantitative systems, this improvement translates to:</p><ul><li><p><strong>Cleaner domain logic</strong> with fewer distractions from type annotations</p></li><li><p><strong>More reusable higher-order functions</strong> that work naturally with pipelines</p></li><li><p><strong>Faster prototyping</strong> in research and model calibration environments</p></li></ul><p>These type inference improvements lower the cognitive load when building complex functional systems - this allows quantitative developers to focus more on what they’re modeling than on how to coerce the compiler into understanding it.</p><hr><h2 id=3-anonymous-record-field-copying-and-nesting>3. Anonymous Record Field Copying and Nesting</h2><p>Anonymous records are lightweight and immutable data containers. In F# 9, you can now create new anonymous records by copying fields from another while modifying specific fields. This allows developers to construct new anonymous records by reusing existing ones and modifying only the fields that change. The syntax is concise and preserves immutability, while making <strong>data transformations more ergonomic</strong> - especially when working with configuration-heavy models.</p><p>In earlier versions of F#, anonymous records were immutable and lightweight, but lacked a way to conveniently modify existing values. Now, with the <code>with</code> keyword, you can efficiently perform <strong>partial updates</strong> without reconstructing the entire record manually. Nesting is also supported, making it possible to model <strong>hierarchical data structures</strong> inline.</p><p>This is perfect for scenario analysis, where you want to base a stressed model on a baseline by tweaking a few parameters.</p><h3 id=practical-use-case-stress-testing-volatility-assumptions>Practical Use Case: Stress Testing Volatility Assumptions</h3><p>Suppose you&rsquo;re building a model that uses a set of baseline assumptions for volatility and interest rates. You want to create a stressed scenario with higher volatility while leaving other parameters unchanged.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#66d9ef>let</span> baseParams <span style=color:#f92672>=</span> <span style=color:#f92672>{|</span> volatility <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>2<span style=color:#f92672>;</span> rate <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>05 <span style=color:#f92672>|}</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> stressedParams <span style=color:#f92672>=</span> <span style=color:#f92672>{|</span> baseParams <span style=color:#66d9ef>with</span> volatility <span style=color:#f92672>=</span> 0<span style=color:#f92672>.</span>3 <span style=color:#f92672>|}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>printfn <span style=color:#e6db74>&#34;Base vol: %f, Stressed vol: %f&#34;</span> baseParams<span style=color:#f92672>.</span>volatility stressedParams<span style=color:#f92672>.</span>volatility
</span></span></code></pre></div><br><ul><li><p>The <code>with</code> keyword lets us <strong>preserve all unchanged fields</strong>, significantly reducing boilerplate and error-prone duplication.</p></li><li><p>Anonymous records are <strong>type-safe</strong>, <strong>immutable</strong>, and <strong>structurally typed</strong> .They behave predictably and efficiently in functional workflows.</p></li></ul><p>This avoids verbose copying or reconstruction of data, making configuration updates much cleaner and aligned with immutable best practices.</p><hr><h2 id=4-interop-improvements-with-c-and-net>4. Interop Improvements with C# and .NET</h2><p>One challenge in F# development within .NET-heavy ecosystems is smooth interoperation with C# codebases. F# 9 improves this by enabling better handling of C# features such as nullable reference types and records.</p><p>This means F# can more naturally handle APIs or libraries written in C#, which is often the case in financial applications using .NET-based market data vendors or risk engines.</p><h3 id=example>Example</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#66d9ef>open</span> System
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> getYield <span style=color:#f92672>(</span>maybeYield<span style=color:#f92672>:</span> Nullable<span style=color:#f92672>&lt;</span><span style=color:#66d9ef>float</span><span style=color:#f92672>&gt;)</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>match</span> maybeYield<span style=color:#f92672>.</span>HasValue <span style=color:#66d9ef>with</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> <span style=color:#66d9ef>true</span> <span style=color:#f92672>-&gt;</span> maybeYield<span style=color:#f92672>.</span>Value
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> <span style=color:#66d9ef>false</span> <span style=color:#f92672>-&gt;</span> 0<span style=color:#f92672>.</span>0
</span></span></code></pre></div><p>This small example illustrates handling <code>Nullable&lt;T></code> from .NET, which is ubiquitous in interop scenarios. Prior to F# 9, this would require more ceremony or workaround.</p><hr><h2 id=5-enhanced-pattern-matching>5. Enhanced Pattern Matching</h2><p>Pattern matching is one of F#’s most powerful features. F# 9 continues to improve it by allowing more expressive forms of decomposition and supporting complex patterns in a cleaner syntax.</p><h3 id=example-describing-trades>Example: Describing Trades</h3><p>Imagine you’re dealing with a stream of trade data coming from different desks. You need to identify the asset class and extract key information for logging, analytics, or downstream processing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fsharp data-lang=fsharp><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Trade</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> BondTrade <span style=color:#66d9ef>of</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>float</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> EquityTrade <span style=color:#66d9ef>of</span> <span style=color:#66d9ef>string</span> <span style=color:#f92672>*</span> int
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> describe trade <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>match</span> trade <span style=color:#66d9ef>with</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> BondTrade <span style=color:#f92672>(</span>issuer<span style=color:#f92672>,</span> price<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> sprintf <span style=color:#e6db74>&#34;Bond: %s at %.2f&#34;</span> issuer price
</span></span><span style=display:flex><span>    <span style=color:#f92672>|</span> EquityTrade <span style=color:#f92672>(</span>ticker<span style=color:#f92672>,</span> qty<span style=color:#f92672>)</span> <span style=color:#f92672>-&gt;</span> sprintf <span style=color:#e6db74>&#34;Equity: %s x %d&#34;</span> ticker qty
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> trades <span style=color:#f92672>=</span> <span style=color:#f92672>[</span> BondTrade<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;CorpA&#34;</span><span style=color:#f92672>,</span> 102<span style=color:#f92672>.</span>5<span style=color:#f92672>);</span> EquityTrade<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;EQX&#34;</span><span style=color:#f92672>,</span> 1000<span style=color:#f92672>)</span> <span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>trades <span style=color:#f92672>|&gt;</span> List.iter <span style=color:#f92672>(</span>describe <span style=color:#f92672>&gt;&gt;</span> printfn <span style=color:#e6db74>&#34;%s&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></div><p>This kind of match expression is now easier to write and read, especially as discriminated unions grow more complex.</p><hr><h2 id=final-thoughts>Final Thoughts</h2><p>F# 9 may not be a massive paradigm shift, but its incremental improvements add up to meaningful productivity gains that come in handy in quantitative domains where performance, clarity, and expressiveness matter. These updates reinforce F#&rsquo;s place as a first-class language for modern analytical and data-driven systems.</p><h3 id=bibliography>Bibliography</h3><p>Ivanek, Jindra. F# Tips Weekly #6: Structural Equality and Comparison. Hashnode, 2022. <a href=https://jindraivanek.hashnode.dev/f-tips-weekly-6-structural-equality-and-comparison target=_blank rel=noopener>https://jindraivanek.hashnode.dev/f-tips-weekly-6-structural-equality-and-comparison</a>.</p><p>Pusz, Scott Wlaschin. Partial Application in F#. F# for Fun and Profit, 2012. <a href=https://fsharpforfunandprofit.com/posts/partial-application target=_blank rel=noopener>https://fsharpforfunandprofit.com/posts/partial-application</a>.</p><p>Bytes, Jeremy. Diving into F#: Partial Application and Type Inference. JeremyBytes.com, 2016. <a href=https://jeremybytes.blogspot.com/2016/07/diving-into-f-partial-application-and.html target=_blank rel=noopener>https://jeremybytes.blogspot.com/2016/07/diving-into-f-partial-application-and.html</a>.</p><p>Microsoft. Copy and Update Record Expressions (F#). Microsoft Learn, 2023. <a href=https://learn.microsoft.com/en-us/dotnet/fsharp/language-reference/copy-and-update-record-expressions target=_blank rel=noopener>https://learn.microsoft.com/en-us/dotnet/fsharp/language-reference/copy-and-update-record-expressions</a>.</p><p>Microsoft. Anonymous Records (F#). Microsoft Learn, 2023. <a href=https://learn.microsoft.com/en-us/dotnet/fsharp/language-reference/anonymous-records target=_blank rel=noopener>https://learn.microsoft.com/en-us/dotnet/fsharp/language-reference/anonymous-records</a>.</p><p>Microsoft. What&rsquo;s New in F# 9. Microsoft Learn, 2023. <a href=https://learn.microsoft.com/en-us/dotnet/fsharp/whats-new/fsharp-9 target=_blank rel=noopener>https://learn.microsoft.com/en-us/dotnet/fsharp/whats-new/fsharp-9</a>.</p></div><div class="row ps-3 pe-3"><div class="col-md-6 share-buttons"><strong>Share on:</strong>
<a class="btn icon-button bg-facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f" target=_blank><i class="fab fa-facebook"></i>
</a><a class="btn icon-button bg-twitter" href="https://twitter.com/share?url=https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f&text=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers&via=R%ce%9eCURSION" target=_blank><i class="fab fa-twitter"></i>
</a><a class="btn icon-button bg-reddit" href="https://reddit.com/submit?url=https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f&title=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers" target=_blank><i class="fab fa-reddit"></i>
</a><a class="btn icon-button bg-linkedin" href="https://www.linkedin.com/shareArticle?url=https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f&title=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers" target=_blank><i class="fab fa-linkedin"></i>
</a><a class="btn icon-button bg-mastodon" href="https://mastodon.social/share?text=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers - https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f" target=_blank><i class="fab fa-mastodon"></i>
</a><a class="btn icon-button bg-whatsapp" href="https://api.whatsapp.com/send?text=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f" target=_blank><i class="fab fa-whatsapp"></i>
</a><a class="btn icon-button" href="mailto:?subject=What%e2%80%99s%20New%20in%20F%23%209%20for%20Quant%20Developers&body=https%3a%2f%2fcarlvinjerry.github.io%2fposts%2fprogramming%2flanguages%2ffsharp%2ffsharp-9-review%2f" target=_blank><i class="fas fa-envelope-open-text"></i></a></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/carlvinjerry/carlvinjerry.github.io/edit/main/content/posts/programming/languages/fsharp/fsharp-9-review/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/programming/interoperability/rdotnet-interop/ title="Seamless R Integration in .NET with R.NET: A Step-by-Step  Guide" class="btn filled-button"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Seamless R Integration in .NET with R.NET: A Step-by-Step Guide</div></a></div><div class="col-md-6 next-article"><a href=/posts/quantitative-finance/intro-to-sdes/ title="Introduction to Stochastic Differential Equations" class="btn filled-button"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>Introduction to Stochastic Differential Equations</div></a></div></div><hr><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")return;var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="i_carlvin",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the
<a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><a id=scroll-to-top class=btn type=button data-bs-toggle=tooltip data-bs-placement=left title="Scroll to top"><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center ps-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#1-record-struct-enhancements-with-custom-equality>1. Record Struct Enhancements with Custom Equality</a><ul><li><a href=#whats-new>What’s New</a></li><li><a href=#practical-use-case-deduplicating-bond-instruments>Practical Use Case: Deduplicating Bond Instruments</a></li></ul></li><li><a href=#2-improved-type-inference-for-lambdas-and-partial-application>2. Improved Type Inference for Lambdas and Partial Application</a><ul><li><a href=#practical-use-case-npv-calculation>Practical Use Case: NPV Calculation</a></li></ul></li><li><a href=#3-anonymous-record-field-copying-and-nesting>3. Anonymous Record Field Copying and Nesting</a><ul><li><a href=#practical-use-case-stress-testing-volatility-assumptions>Practical Use Case: Stress Testing Volatility Assumptions</a></li></ul></li><li><a href=#4-interop-improvements-with-c-and-net>4. Interop Improvements with C# and .NET</a><ul><li><a href=#example>Example</a></li></ul></li><li><a href=#5-enhanced-pattern-matching>5. Enhanced Pattern Matching</a><ul><li><a href=#example-describing-trades>Example: Describing Trades</a></li></ul></li><li><a href=#final-thoughts>Final Thoughts</a><ul><li><a href=#bibliography>Bibliography</a></li></ul></li></ul></nav></div></div></section></div><footer id=footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-start"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=https://carlvinjerry.github.io/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=https://carlvinjerry.github.io/#recent-posts>Recent Posts</a></li><li class=nav-item><a class=smooth-scroll href=https://carlvinjerry.github.io/#projects>Projects</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><a href=mailto:carlvinjerry@gmail.com%20%7c%20cmwange@beyondrawdata.co.ke target=_blank rel=noopener><span><i class="fas fa-envelope"></i></span> <span>carlvinjerry@gmail.com | cmwange@beyondrawdata.co.ke</span></a></li><li><a href=https://github.com/carlvinjerry target=_blank rel=noopener><span><i class="fab fa-github"></i></span> <span>carlvinjerry</span></a></li><li><a href=https://www.linkedin.com/in/carlvinmwange target=_blank rel=noopener><span><i class="fab fa-linkedin"></i></span> <span>Carlvin Jerry Mwange</span></a></li><li><a href=tel:+254%20%280%29747%20942%20588 target=_blank rel=noopener><span><i class="fas fa-phone-alt"></i></span> <span>+254 (0)747 942 588</span></a></li><li><a href=https://www.researchgate.net/profile/carlvinmwange target=_blank rel=noopener><span><i class="fab fa-researchgate"></i></span> <span>Carlvin Jerry Mwange</span></a></li></ul></div></div></div><hr><div class=container><p id=disclaimer><strong>Liability Notice:</strong> This theme is under MIT license. So, you can use it for non-commercial, commercial, or private uses. You can modify or distribute the theme without requiring any permission from the theme author. However, the theme author does not provide any warranty or takes any liability for any issue with the theme.</p></div><hr><div class=container><div class="row text-start"><div class=col-md-4><a id=theme href=https://github.com/hugo-toha/toha target=_blank rel=noopener><img src=/images/theme-logo_hu16779671404603505019.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-end"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script src=/application.b1192b27bb9da1367104dd2311a23a6f78cc8e16c840ce3f8406443569df5b65.js integrity="sha256-sRkrJ7udoTZxBN0jEaI6b3jMjhbIQM4/hAZENWnfW2U=" defer></script></body></html>